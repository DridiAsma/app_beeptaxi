"use strict";(self.webpackChunkfront_appbee=self.webpackChunkfront_appbee||[]).push([[0],[(C,c,i)=>{i.r(c),i.d(c,{MapModule:()=>x});var p=i(6895),d=i(9724),e=i(8274),r=i(433),g=i(918);function m(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275element(1,"div",10),e.\u0275\u0275elementEnd())}function u(t,a){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.clearPlacesField())}),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd()}}const h=function(t){return{"map-places-search-visible":t}},f=[{path:"",component:(()=>{class t{constructor(n){this.ngZone=n,this.time="",this.distance="",this.togglePlacesSearch=!1,this.options={mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!0,disableDefaultUI:!0,disableDoubleClickZoom:!0,zoom:12}}ngOnInit(){this.ds=new google.maps.DirectionsService,this.dr=new google.maps.DirectionsRenderer({map:null,suppressMarkers:!0}),navigator.geolocation.getCurrentPosition(n=>{this.center={lat:n.coords.latitude,lng:n.coords.longitude},this.destination=this.center,this.map=new google.maps.Map(document.getElementById("map-canvas"),{...this.options,center:this.destination}),this.map.addListener("tilesloaded",()=>{this.ngZone.run(()=>{this.mapLoaded=!0})}),this.destinationPin=new google.maps.Marker({position:this.destination,icon:{url:"assets/photo/imgs/truck_pin.svg",anchor:new google.maps.Point(35,10),scaledSize:new google.maps.Size(50,50)},map:this.map}),this.map.addListener("click",o=>{this.showMapPill=!1})})}setRoutePolyline(){let n={origin:this.source,destination:this.destination,travelMode:google.maps.TravelMode.DRIVING};this.ds.route(n,(o,s)=>{this.dr.setOptions({suppressPolylines:!1,map:this.map}),s==google.maps.DirectionsStatus.OK&&(this.dr.setDirections(o),this.ngZone.run(()=>{let l=o.routes[0].legs[0];this.distance=l.distance.text,this.time=l.duration.text}))})}handleAddressChange(n){const o=n.geometry.location.lat(),s=n.geometry.location.lng();this.source={lat:o,lng:s},this.sourcePin?this.sourcePin.setPosition(this.source):(this.sourcePin=new google.maps.Marker({position:this.source,icon:{url:"assets/blue-marker.png",anchor:new google.maps.Point(10,10),scaledSize:new google.maps.Size(50,50)},animation:google.maps.Animation.DROP,map:this.map}),this.sourcePin.addListener("click",l=>{this.showMapPill=!0,this.onCenterMap()})),this.setRoutePolyline()}onCenterMap(){this.map.panTo(this.source)}clearPlacesField(){this.placesText=""}toggleSearch(){this.togglePlacesSearch=!this.togglePlacesSearch}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(e.NgZone))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-map"]],decls:10,vars:6,consts:[[1,"app-page"],["id","map-canvas"],["map",""],["class","map-loader-container",4,"ngIf"],[1,"map-places-pill",3,"ngClass"],[1,"material-icons"],["type","text","placeholder","Set truck location...","ngx-google-places-autocomplete","",3,"ngModel","ngModelChange","onAddressChange"],["placesRef","ngx-places"],["class","material-icons close-btn",3,"click",4,"ngIf"],[1,"map-loader-container"],[1,"map-loader"],[1,"material-icons","close-btn",3,"click"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"div",1,2),e.\u0275\u0275template(3,m,2,0,"div",3),e.\u0275\u0275elementStart(4,"div",4)(5,"span",5),e.\u0275\u0275text(6,"room"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"input",6,7),e.\u0275\u0275listener("ngModelChange",function(l){return o.placesText=l})("onAddressChange",function(l){return o.handleAddressChange(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,u,2,0,"span",8),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.mapLoaded),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,h,o.togglePlacesSearch)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",o.placesText),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.placesText&&o.placesText.length>0))},dependencies:[p.mk,p.O5,r.Fj,r.JJ,r.On,g.GooglePlaceDirective],styles:["#map-canvas[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.map-loader-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:10;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.map-loader[_ngcontent-%COMP%]{background-repeat:no-repeat;max-width:100%;background-position:center;background-size:cover;width:130px;height:130px}.map-pill[_ngcontent-%COMP%]{background:#fff;position:fixed;bottom:25px;left:50;right:0;margin:12px;border-radius:50px;padding:80px;box-shadow:0 0 20px #0000001a}.youps-pill-logo[_ngcontent-%COMP%]{background-color:#7fff00;background-size:cover;background-position:center;width:50px;height:50px}.youps-pill-content[_ngcontent-%COMP%]{margin-left:12px}.youps-pill-label[_ngcontent-%COMP%]{color:#4b290c;font-size:1em}.youps-pill-distance-time[_ngcontent-%COMP%]{color:gray}.map-user-pill[_ngcontent-%COMP%]{padding:118px!important;top:0;bottom:auto!important;display:flex;align-items:center;z-index:10}.map-user-pill-content[_ngcontent-%COMP%]{margin-left:112px;flex:1}.map-user-display-name[_ngcontent-%COMP%]{font-size:1em;color:youps-main-brown}.map-user-display-desc[_ngcontent-%COMP%]{font-size:.7em;color:#a83737}.map-user-pill-logout[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;padding:8px;cursor:pointer;background:#c1834f;border-radius:50%}.map-pill-show[_ngcontent-%COMP%]{bottom:25px!important}.map-places-pill[_ngcontent-%COMP%]{position:fixed;top:32px;background:#753f17;left:0;right:0;margin:12px;padding:0 12px 14px;border-radius:0 0 30px 30px;box-shadow:0 0 20px #0009;z-index:9;color:#fff;display:flex;opacity:0;transition:opacity .25s,padding-top .25s}.material-icons[_ngcontent-%COMP%]{font-size:2em!important;color:#fff}.material-icons.close-btn[_ngcontent-%COMP%]{font-size:1.3em!important;display:flex;align-items:center}input[type=text][_ngcontent-%COMP%]{color:#fff!important;background:transparent;border:none;width:100%;margin-right:12px;text-overflow:ellipsis}input[type=text][_ngcontent-%COMP%]::placeholder{color:#fff}.map-places-search-visible[_ngcontent-%COMP%]{padding-top:44px!important;opacity:1!important}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.Bz.forChild(f),d.Bz]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.ez,M,g.GooglePlaceModule]}),t})()}]]);